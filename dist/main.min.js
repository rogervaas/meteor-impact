(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"./src/js/main.js":[function(require,module,exports){
'use strict';

window.Utils = require('./utils');

var game = new Phaser.Game(Utils.getScreenWidth(), Utils.getScreenHeight(), Phaser.AUTO, 'meteorimpact-game');

window.playerState = {
    currentLevel: 'Game'
};

game.state.add('Boot', require('./states/boot'));
game.state.add('Splash', require('./states/splash'));
game.state.add('Preloader', require('./states/preloader'));
game.state.add('Menu', require('./states/menu'));
game.state.add('Game', require('./states/game'));

game.state.start('Boot');


},{"./states/boot":"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/states/boot.js","./states/game":"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/states/game.js","./states/menu":"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/states/menu.js","./states/preloader":"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/states/preloader.js","./states/splash":"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/states/splash.js","./utils":"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/utils.js"}],"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/entities/asteroids.js":[function(require,module,exports){
var Asteroids = function (sprite, game, x, y) {

  Phaser.Sprite.call(this, game, x, y, sprite);
  game.add.existing(this);

  game.physics.enable(this, Phaser.Physics.ARCADE);


  this.body.drag.set(100);
  this.body.maxVelocity.set(200);
};

Asteroids.prototype = Object.create(Phaser.Sprite.prototype);
Asteroids.prototype.constructor = Asteroids;

/**
 * Automatically called by World.update
 */
Asteroids.prototype.update = function() {



};

module.exports = Asteroids;

},{}],"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/entities/player.js":[function(require,module,exports){
var Player = function (sprite, game, x, y) {

    Phaser.Sprite.call(this, game, x, y, sprite);
    game.add.existing(this);

    game.physics.enable(this, Phaser.Physics.ARCADE);


    this.body.drag.set(100);
    this.body.maxVelocity.set(200);
};

Player.prototype = Object.create(Phaser.Sprite.prototype);
Player.prototype.constructor = Player;

/**
 * Automatically called by World.update
 */
Player.prototype.update = function() {

    if (this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT)) {
        this.body.angularVelocity = -200;
    } else if (this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)) {
        this.body.angularVelocity = 200;
    } else {
        this.body.angularVelocity = 0;
    }

    if (this.game.input.keyboard.isDown(Phaser.Keyboard.UP)) {
        this.game.physics.arcade.accelerationFromRotation(this.rotation, 200, this.body.acceleration);
    } else {
        this.body.acceleration.set(0);
    }

};

Player.prototype.fire = function () {
    if (this.game.time.now > bulletTime)
    {
        bullet = bullets.getFirstExists(false);

        if (bullet)
        {
            bullet.reset(sprite.body.x + 16, sprite.body.y + 16);
            bullet.lifespan = 2000;
            bullet.rotation = sprite.rotation;
            game.physics.arcade.velocityFromRotation(sprite.rotation, 400, bullet.body.velocity);
            bulletTime = game.time.now + 50;
        }
    }
};

module.exports = Player;

},{}],"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/states/boot.js":[function(require,module,exports){
var Boot = function () {};

module.exports = Boot;

Boot.prototype = {

  preload: function () {
    this.load.image('preloader', 'assets/preloader.gif');
  },

  create: function () {
    this.game.input.maxPointers = 1;

    if (this.game.device.desktop) {
      this.game.stage.scale.pageAlignHorizontally = true;
    } else {
      this.game.stage.scaleMode = Phaser.StageScaleMode.SHOW_ALL;
      this.game.stage.scale.minWidth =  480;
      this.game.stage.scale.minHeight = 260;
      this.game.stage.scale.maxWidth = 640;
      this.game.stage.scale.maxHeight = 480;
      this.game.stage.scale.forceLandscape = true;
      this.game.stage.scale.pageAlignHorizontally = true;
      this.game.stage.scale.setScreenSize(true);
    }

    this.game.state.start('Preloader');
  }
};

},{}],"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/states/game.js":[function(require,module,exports){
var Player = require('../entities/player');
var Asteroids = require('../entities/asteroids');

var Game = function () {

  this.players = [];
  this.asteroids = [];

};

Game.prototype = {

  create: function () {

    //  This will run in Canvas mode, so let's gain a little speed and display
    this.game.renderer.clearBeforeRender = false;
    this.game.renderer.roundPixels = true;

    // Lets define the input for our game.
    this.game.input.keyboard.addKeyCapture([
      Phaser.Keyboard.LEFT,
      Phaser.Keyboard.RIGHT,
      Phaser.Keyboard.UP,
      Phaser.Keyboard.DOWN,
      Phaser.Keyboard.SPACEBAR
    ]);

    // Setting the global game physics
    this.game.physics.startSystem(Phaser.Physics.ARCADE);

    // Lets add our universe (background)
    this.game.add.tileSprite(0, 0, screen.width, screen.height, Utils.backgrounds[Utils.randomNumber(0,3)]);

    var x = (this.game.width / 2) - 100;
    var y = (this.game.height / 2) - 50;

    //this.testentity = new Player(this.game, x, y);
    //this.testentity.anchor.setTo(0.5, 0.5);
    //
    ////this.input.onDown.add(this.onInputDown, this);
    //
    //console.log(this.game);


    this.players.push(new Player("spaceship",this.game, x, y));
    this.players[0].anchor.setTo(0.5, 0.5);
    this.players[0].scale.setTo(0.5,0.5);

  },

  update: function () {

    this.screenWrap(this.players[0], this.game);

  },

  screenWrap : function (sprite, game) {

    if (sprite.x < 0) {
      sprite.x = game.width;
    } else if (sprite.x > game.width) {
      sprite.x = 0;
    }

    if (sprite.y < 0) {
      sprite.y = game.height;
    } else if (sprite.y > game.height) {
      sprite.y = 0;
    }
  },

  render : function () {
    this.game.debug.spriteInfo(this.players[0], 32, 32);
    this.game.debug.text('angularVelocity: ' + this.players[0].body.angularVelocity, 32, 200);
    this.game.debug.text('angularAcceleration: ' + this.players[0].body.angularAcceleration, 32, 232);
    this.game.debug.text('angularDrag: ' + this.players[0].body.angularDrag, 32, 264);
    this.game.debug.text('deltaZ: ' + this.players[0].body.deltaZ(), 32, 296);

  },

  onInputDown: function () {
    this.game.state.start('Menu');
  }
};

module.exports = Game;
},{"../entities/asteroids":"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/entities/asteroids.js","../entities/player":"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/entities/player.js"}],"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/states/menu.js":[function(require,module,exports){
var Menu = function () {
  this.text = null;
};

module.exports = Menu;

Menu.prototype = {

  create: function () {
    this.game.add.tileSprite(0, 0, screen.width, screen.height, Utils.backgrounds[Utils.randomNumber(0,3)]);
    this.displayText();
    this.input.onDown.add(this.onDown, this);
  },

  update: function () {

  },

  onDown: function () {
    this.game.state.start(playerState.currentLevel);
  },

  displayText : function () {
    var x = this.game.width / 2;
    var y = this.game.height / 2;
    var style = { font: "65px Arial", fill: "#ffffff", align: "center" };
    this.text = this.add.text(x - 200, y - 200, "Press to Start", style);
  }
};

},{}],"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/states/preloader.js":[function(require,module,exports){
var Preloader = function (game) {
  this.asset = null;
  this.ready = false;
};

module.exports = Preloader;

Preloader.prototype = {

  preload: function () {
    this.asset = this.add.sprite(320, 240, 'preloader');
    this.asset.anchor.setTo(0.5, 0.5);

    this.load.onLoadComplete.addOnce(this.onLoadComplete, this);
    this.load.setPreloadSprite(this.asset);

    this.load.image('testsprite', 'assets/test.png');

    this.load.image("spaceship", "assets/spaceships/playerShip1_blue.png");

    this.load.image("backgroundBlack", "assets/backgrounds/black.png");
    this.load.image("backgroundBlue", "assets/backgrounds/blue.png");
    this.load.image("backgroundDarkPurple", "assets/backgrounds/darkPurple.png");
    this.load.image("backgroundPurple", "assets/backgrounds/purple.png");
  },

  create: function () {
    this.asset.cropEnabled = false;
  },

  update: function () {
    if (!!this.ready) {
      this.game.state.start('Menu');
    }
  },

  onLoadComplete: function () {
    this.ready = true;
  }
};

},{}],"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/states/splash.js":[function(require,module,exports){
var Splash = function () {
};

module.exports = Splash;

Splash.prototype = {
  create: function () {
  }
};
},{}],"/Users/sadiqevani/Laboratory/meteorimpact-v2/src/js/utils.js":[function(require,module,exports){
var Utils = {
    containsObject: function(obj, list) {
        var i;
        for (i = 0; i < list.length; i++) {
            if (list[i] === obj) {
                return true;
            }
        }

        return false;
    },

    randomNumber: function(minimum, maximum) {
        return Math.round(Math.random() * (maximum - minimum) + minimum);
    },

    getScreenWidth : function () {
        return screen.width;
    },

    getScreenHeight : function () {
        return screen.height;
    },

    backgrounds : [
    "backgroundBlack",
    "backgroundBlue",
    "backgroundDarkPurple",
    "backgroundPurple"
    ]
};

module.exports = Utils;
},{}]},{},["./src/js/main.js"])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvbWFpbi5qcyIsInNyYy9qcy9lbnRpdGllcy9hc3Rlcm9pZHMuanMiLCJzcmMvanMvZW50aXRpZXMvcGxheWVyLmpzIiwic3JjL2pzL3N0YXRlcy9ib290LmpzIiwic3JjL2pzL3N0YXRlcy9nYW1lLmpzIiwic3JjL2pzL3N0YXRlcy9tZW51LmpzIiwic3JjL2pzL3N0YXRlcy9wcmVsb2FkZXIuanMiLCJzcmMvanMvc3RhdGVzL3NwbGFzaC5qcyIsInNyYy9qcy91dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIid1c2Ugc3RyaWN0Jztcblxud2luZG93LlV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuXG52YXIgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZShVdGlscy5nZXRTY3JlZW5XaWR0aCgpLCBVdGlscy5nZXRTY3JlZW5IZWlnaHQoKSwgUGhhc2VyLkFVVE8sICdtZXRlb3JpbXBhY3QtZ2FtZScpO1xuXG53aW5kb3cucGxheWVyU3RhdGUgPSB7XG4gICAgY3VycmVudExldmVsOiAnR2FtZSdcbn07XG5cbmdhbWUuc3RhdGUuYWRkKCdCb290JywgcmVxdWlyZSgnLi9zdGF0ZXMvYm9vdCcpKTtcbmdhbWUuc3RhdGUuYWRkKCdTcGxhc2gnLCByZXF1aXJlKCcuL3N0YXRlcy9zcGxhc2gnKSk7XG5nYW1lLnN0YXRlLmFkZCgnUHJlbG9hZGVyJywgcmVxdWlyZSgnLi9zdGF0ZXMvcHJlbG9hZGVyJykpO1xuZ2FtZS5zdGF0ZS5hZGQoJ01lbnUnLCByZXF1aXJlKCcuL3N0YXRlcy9tZW51JykpO1xuZ2FtZS5zdGF0ZS5hZGQoJ0dhbWUnLCByZXF1aXJlKCcuL3N0YXRlcy9nYW1lJykpO1xuXG5nYW1lLnN0YXRlLnN0YXJ0KCdCb290Jyk7XG5cbiIsInZhciBBc3Rlcm9pZHMgPSBmdW5jdGlvbiAoc3ByaXRlLCBnYW1lLCB4LCB5KSB7XG5cbiAgUGhhc2VyLlNwcml0ZS5jYWxsKHRoaXMsIGdhbWUsIHgsIHksIHNwcml0ZSk7XG4gIGdhbWUuYWRkLmV4aXN0aW5nKHRoaXMpO1xuXG4gIGdhbWUucGh5c2ljcy5lbmFibGUodGhpcywgUGhhc2VyLlBoeXNpY3MuQVJDQURFKTtcblxuXG4gIHRoaXMuYm9keS5kcmFnLnNldCgxMDApO1xuICB0aGlzLmJvZHkubWF4VmVsb2NpdHkuc2V0KDIwMCk7XG59O1xuXG5Bc3Rlcm9pZHMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XG5Bc3Rlcm9pZHMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQXN0ZXJvaWRzO1xuXG4vKipcbiAqIEF1dG9tYXRpY2FsbHkgY2FsbGVkIGJ5IFdvcmxkLnVwZGF0ZVxuICovXG5Bc3Rlcm9pZHMucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXG5cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBBc3Rlcm9pZHM7XG4iLCJ2YXIgUGxheWVyID0gZnVuY3Rpb24gKHNwcml0ZSwgZ2FtZSwgeCwgeSkge1xuXG4gICAgUGhhc2VyLlNwcml0ZS5jYWxsKHRoaXMsIGdhbWUsIHgsIHksIHNwcml0ZSk7XG4gICAgZ2FtZS5hZGQuZXhpc3RpbmcodGhpcyk7XG5cbiAgICBnYW1lLnBoeXNpY3MuZW5hYmxlKHRoaXMsIFBoYXNlci5QaHlzaWNzLkFSQ0FERSk7XG5cblxuICAgIHRoaXMuYm9keS5kcmFnLnNldCgxMDApO1xuICAgIHRoaXMuYm9keS5tYXhWZWxvY2l0eS5zZXQoMjAwKTtcbn07XG5cblBsYXllci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5TcHJpdGUucHJvdG90eXBlKTtcblBsYXllci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQbGF5ZXI7XG5cbi8qKlxuICogQXV0b21hdGljYWxseSBjYWxsZWQgYnkgV29ybGQudXBkYXRlXG4gKi9cblBsYXllci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cbiAgICBpZiAodGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLmlzRG93bihQaGFzZXIuS2V5Ym9hcmQuTEVGVCkpIHtcbiAgICAgICAgdGhpcy5ib2R5LmFuZ3VsYXJWZWxvY2l0eSA9IC0yMDA7XG4gICAgfSBlbHNlIGlmICh0aGlzLmdhbWUuaW5wdXQua2V5Ym9hcmQuaXNEb3duKFBoYXNlci5LZXlib2FyZC5SSUdIVCkpIHtcbiAgICAgICAgdGhpcy5ib2R5LmFuZ3VsYXJWZWxvY2l0eSA9IDIwMDtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmJvZHkuYW5ndWxhclZlbG9jaXR5ID0gMDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLmlzRG93bihQaGFzZXIuS2V5Ym9hcmQuVVApKSB7XG4gICAgICAgIHRoaXMuZ2FtZS5waHlzaWNzLmFyY2FkZS5hY2NlbGVyYXRpb25Gcm9tUm90YXRpb24odGhpcy5yb3RhdGlvbiwgMjAwLCB0aGlzLmJvZHkuYWNjZWxlcmF0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmJvZHkuYWNjZWxlcmF0aW9uLnNldCgwKTtcbiAgICB9XG5cbn07XG5cblBsYXllci5wcm90b3R5cGUuZmlyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5nYW1lLnRpbWUubm93ID4gYnVsbGV0VGltZSlcbiAgICB7XG4gICAgICAgIGJ1bGxldCA9IGJ1bGxldHMuZ2V0Rmlyc3RFeGlzdHMoZmFsc2UpO1xuXG4gICAgICAgIGlmIChidWxsZXQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJ1bGxldC5yZXNldChzcHJpdGUuYm9keS54ICsgMTYsIHNwcml0ZS5ib2R5LnkgKyAxNik7XG4gICAgICAgICAgICBidWxsZXQubGlmZXNwYW4gPSAyMDAwO1xuICAgICAgICAgICAgYnVsbGV0LnJvdGF0aW9uID0gc3ByaXRlLnJvdGF0aW9uO1xuICAgICAgICAgICAgZ2FtZS5waHlzaWNzLmFyY2FkZS52ZWxvY2l0eUZyb21Sb3RhdGlvbihzcHJpdGUucm90YXRpb24sIDQwMCwgYnVsbGV0LmJvZHkudmVsb2NpdHkpO1xuICAgICAgICAgICAgYnVsbGV0VGltZSA9IGdhbWUudGltZS5ub3cgKyA1MDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUGxheWVyO1xuIiwidmFyIEJvb3QgPSBmdW5jdGlvbiAoKSB7fTtcblxubW9kdWxlLmV4cG9ydHMgPSBCb290O1xuXG5Cb290LnByb3RvdHlwZSA9IHtcblxuICBwcmVsb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5sb2FkLmltYWdlKCdwcmVsb2FkZXInLCAnYXNzZXRzL3ByZWxvYWRlci5naWYnKTtcbiAgfSxcblxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmdhbWUuaW5wdXQubWF4UG9pbnRlcnMgPSAxO1xuXG4gICAgaWYgKHRoaXMuZ2FtZS5kZXZpY2UuZGVza3RvcCkge1xuICAgICAgdGhpcy5nYW1lLnN0YWdlLnNjYWxlLnBhZ2VBbGlnbkhvcml6b250YWxseSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZ2FtZS5zdGFnZS5zY2FsZU1vZGUgPSBQaGFzZXIuU3RhZ2VTY2FsZU1vZGUuU0hPV19BTEw7XG4gICAgICB0aGlzLmdhbWUuc3RhZ2Uuc2NhbGUubWluV2lkdGggPSAgNDgwO1xuICAgICAgdGhpcy5nYW1lLnN0YWdlLnNjYWxlLm1pbkhlaWdodCA9IDI2MDtcbiAgICAgIHRoaXMuZ2FtZS5zdGFnZS5zY2FsZS5tYXhXaWR0aCA9IDY0MDtcbiAgICAgIHRoaXMuZ2FtZS5zdGFnZS5zY2FsZS5tYXhIZWlnaHQgPSA0ODA7XG4gICAgICB0aGlzLmdhbWUuc3RhZ2Uuc2NhbGUuZm9yY2VMYW5kc2NhcGUgPSB0cnVlO1xuICAgICAgdGhpcy5nYW1lLnN0YWdlLnNjYWxlLnBhZ2VBbGlnbkhvcml6b250YWxseSA9IHRydWU7XG4gICAgICB0aGlzLmdhbWUuc3RhZ2Uuc2NhbGUuc2V0U2NyZWVuU2l6ZSh0cnVlKTtcbiAgICB9XG5cbiAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ1ByZWxvYWRlcicpO1xuICB9XG59O1xuIiwidmFyIFBsYXllciA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL3BsYXllcicpO1xudmFyIEFzdGVyb2lkcyA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL2FzdGVyb2lkcycpO1xuXG52YXIgR2FtZSA9IGZ1bmN0aW9uICgpIHtcblxuICB0aGlzLnBsYXllcnMgPSBbXTtcbiAgdGhpcy5hc3Rlcm9pZHMgPSBbXTtcblxufTtcblxuR2FtZS5wcm90b3R5cGUgPSB7XG5cbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAvLyAgVGhpcyB3aWxsIHJ1biBpbiBDYW52YXMgbW9kZSwgc28gbGV0J3MgZ2FpbiBhIGxpdHRsZSBzcGVlZCBhbmQgZGlzcGxheVxuICAgIHRoaXMuZ2FtZS5yZW5kZXJlci5jbGVhckJlZm9yZVJlbmRlciA9IGZhbHNlO1xuICAgIHRoaXMuZ2FtZS5yZW5kZXJlci5yb3VuZFBpeGVscyA9IHRydWU7XG5cbiAgICAvLyBMZXRzIGRlZmluZSB0aGUgaW5wdXQgZm9yIG91ciBnYW1lLlxuICAgIHRoaXMuZ2FtZS5pbnB1dC5rZXlib2FyZC5hZGRLZXlDYXB0dXJlKFtcbiAgICAgIFBoYXNlci5LZXlib2FyZC5MRUZULFxuICAgICAgUGhhc2VyLktleWJvYXJkLlJJR0hULFxuICAgICAgUGhhc2VyLktleWJvYXJkLlVQLFxuICAgICAgUGhhc2VyLktleWJvYXJkLkRPV04sXG4gICAgICBQaGFzZXIuS2V5Ym9hcmQuU1BBQ0VCQVJcbiAgICBdKTtcblxuICAgIC8vIFNldHRpbmcgdGhlIGdsb2JhbCBnYW1lIHBoeXNpY3NcbiAgICB0aGlzLmdhbWUucGh5c2ljcy5zdGFydFN5c3RlbShQaGFzZXIuUGh5c2ljcy5BUkNBREUpO1xuXG4gICAgLy8gTGV0cyBhZGQgb3VyIHVuaXZlcnNlIChiYWNrZ3JvdW5kKVxuICAgIHRoaXMuZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCBzY3JlZW4ud2lkdGgsIHNjcmVlbi5oZWlnaHQsIFV0aWxzLmJhY2tncm91bmRzW1V0aWxzLnJhbmRvbU51bWJlcigwLDMpXSk7XG5cbiAgICB2YXIgeCA9ICh0aGlzLmdhbWUud2lkdGggLyAyKSAtIDEwMDtcbiAgICB2YXIgeSA9ICh0aGlzLmdhbWUuaGVpZ2h0IC8gMikgLSA1MDtcblxuICAgIC8vdGhpcy50ZXN0ZW50aXR5ID0gbmV3IFBsYXllcih0aGlzLmdhbWUsIHgsIHkpO1xuICAgIC8vdGhpcy50ZXN0ZW50aXR5LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgLy9cbiAgICAvLy8vdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMub25JbnB1dERvd24sIHRoaXMpO1xuICAgIC8vXG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLmdhbWUpO1xuXG5cbiAgICB0aGlzLnBsYXllcnMucHVzaChuZXcgUGxheWVyKFwic3BhY2VzaGlwXCIsdGhpcy5nYW1lLCB4LCB5KSk7XG4gICAgdGhpcy5wbGF5ZXJzWzBdLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgdGhpcy5wbGF5ZXJzWzBdLnNjYWxlLnNldFRvKDAuNSwwLjUpO1xuXG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG5cbiAgICB0aGlzLnNjcmVlbldyYXAodGhpcy5wbGF5ZXJzWzBdLCB0aGlzLmdhbWUpO1xuXG4gIH0sXG5cbiAgc2NyZWVuV3JhcCA6IGZ1bmN0aW9uIChzcHJpdGUsIGdhbWUpIHtcblxuICAgIGlmIChzcHJpdGUueCA8IDApIHtcbiAgICAgIHNwcml0ZS54ID0gZ2FtZS53aWR0aDtcbiAgICB9IGVsc2UgaWYgKHNwcml0ZS54ID4gZ2FtZS53aWR0aCkge1xuICAgICAgc3ByaXRlLnggPSAwO1xuICAgIH1cblxuICAgIGlmIChzcHJpdGUueSA8IDApIHtcbiAgICAgIHNwcml0ZS55ID0gZ2FtZS5oZWlnaHQ7XG4gICAgfSBlbHNlIGlmIChzcHJpdGUueSA+IGdhbWUuaGVpZ2h0KSB7XG4gICAgICBzcHJpdGUueSA9IDA7XG4gICAgfVxuICB9LFxuXG4gIHJlbmRlciA6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmdhbWUuZGVidWcuc3ByaXRlSW5mbyh0aGlzLnBsYXllcnNbMF0sIDMyLCAzMik7XG4gICAgdGhpcy5nYW1lLmRlYnVnLnRleHQoJ2FuZ3VsYXJWZWxvY2l0eTogJyArIHRoaXMucGxheWVyc1swXS5ib2R5LmFuZ3VsYXJWZWxvY2l0eSwgMzIsIDIwMCk7XG4gICAgdGhpcy5nYW1lLmRlYnVnLnRleHQoJ2FuZ3VsYXJBY2NlbGVyYXRpb246ICcgKyB0aGlzLnBsYXllcnNbMF0uYm9keS5hbmd1bGFyQWNjZWxlcmF0aW9uLCAzMiwgMjMyKTtcbiAgICB0aGlzLmdhbWUuZGVidWcudGV4dCgnYW5ndWxhckRyYWc6ICcgKyB0aGlzLnBsYXllcnNbMF0uYm9keS5hbmd1bGFyRHJhZywgMzIsIDI2NCk7XG4gICAgdGhpcy5nYW1lLmRlYnVnLnRleHQoJ2RlbHRhWjogJyArIHRoaXMucGxheWVyc1swXS5ib2R5LmRlbHRhWigpLCAzMiwgMjk2KTtcblxuICB9LFxuXG4gIG9uSW5wdXREb3duOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdNZW51Jyk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gR2FtZTsiLCJ2YXIgTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy50ZXh0ID0gbnVsbDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gTWVudTtcblxuTWVudS5wcm90b3R5cGUgPSB7XG5cbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5nYW1lLmFkZC50aWxlU3ByaXRlKDAsIDAsIHNjcmVlbi53aWR0aCwgc2NyZWVuLmhlaWdodCwgVXRpbHMuYmFja2dyb3VuZHNbVXRpbHMucmFuZG9tTnVtYmVyKDAsMyldKTtcbiAgICB0aGlzLmRpc3BsYXlUZXh0KCk7XG4gICAgdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMub25Eb3duLCB0aGlzKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcblxuICB9LFxuXG4gIG9uRG93bjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydChwbGF5ZXJTdGF0ZS5jdXJyZW50TGV2ZWwpO1xuICB9LFxuXG4gIGRpc3BsYXlUZXh0IDogZnVuY3Rpb24gKCkge1xuICAgIHZhciB4ID0gdGhpcy5nYW1lLndpZHRoIC8gMjtcbiAgICB2YXIgeSA9IHRoaXMuZ2FtZS5oZWlnaHQgLyAyO1xuICAgIHZhciBzdHlsZSA9IHsgZm9udDogXCI2NXB4IEFyaWFsXCIsIGZpbGw6IFwiI2ZmZmZmZlwiLCBhbGlnbjogXCJjZW50ZXJcIiB9O1xuICAgIHRoaXMudGV4dCA9IHRoaXMuYWRkLnRleHQoeCAtIDIwMCwgeSAtIDIwMCwgXCJQcmVzcyB0byBTdGFydFwiLCBzdHlsZSk7XG4gIH1cbn07XG4iLCJ2YXIgUHJlbG9hZGVyID0gZnVuY3Rpb24gKGdhbWUpIHtcbiAgdGhpcy5hc3NldCA9IG51bGw7XG4gIHRoaXMucmVhZHkgPSBmYWxzZTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUHJlbG9hZGVyO1xuXG5QcmVsb2FkZXIucHJvdG90eXBlID0ge1xuXG4gIHByZWxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmFzc2V0ID0gdGhpcy5hZGQuc3ByaXRlKDMyMCwgMjQwLCAncHJlbG9hZGVyJyk7XG4gICAgdGhpcy5hc3NldC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuXG4gICAgdGhpcy5sb2FkLm9uTG9hZENvbXBsZXRlLmFkZE9uY2UodGhpcy5vbkxvYWRDb21wbGV0ZSwgdGhpcyk7XG4gICAgdGhpcy5sb2FkLnNldFByZWxvYWRTcHJpdGUodGhpcy5hc3NldCk7XG5cbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3Rlc3RzcHJpdGUnLCAnYXNzZXRzL3Rlc3QucG5nJyk7XG5cbiAgICB0aGlzLmxvYWQuaW1hZ2UoXCJzcGFjZXNoaXBcIiwgXCJhc3NldHMvc3BhY2VzaGlwcy9wbGF5ZXJTaGlwMV9ibHVlLnBuZ1wiKTtcblxuICAgIHRoaXMubG9hZC5pbWFnZShcImJhY2tncm91bmRCbGFja1wiLCBcImFzc2V0cy9iYWNrZ3JvdW5kcy9ibGFjay5wbmdcIik7XG4gICAgdGhpcy5sb2FkLmltYWdlKFwiYmFja2dyb3VuZEJsdWVcIiwgXCJhc3NldHMvYmFja2dyb3VuZHMvYmx1ZS5wbmdcIik7XG4gICAgdGhpcy5sb2FkLmltYWdlKFwiYmFja2dyb3VuZERhcmtQdXJwbGVcIiwgXCJhc3NldHMvYmFja2dyb3VuZHMvZGFya1B1cnBsZS5wbmdcIik7XG4gICAgdGhpcy5sb2FkLmltYWdlKFwiYmFja2dyb3VuZFB1cnBsZVwiLCBcImFzc2V0cy9iYWNrZ3JvdW5kcy9wdXJwbGUucG5nXCIpO1xuICB9LFxuXG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuYXNzZXQuY3JvcEVuYWJsZWQgPSBmYWxzZTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoISF0aGlzLnJlYWR5KSB7XG4gICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ01lbnUnKTtcbiAgICB9XG4gIH0sXG5cbiAgb25Mb2FkQ29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlYWR5ID0gdHJ1ZTtcbiAgfVxufTtcbiIsInZhciBTcGxhc2ggPSBmdW5jdGlvbiAoKSB7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNwbGFzaDtcblxuU3BsYXNoLnByb3RvdHlwZSA9IHtcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gIH1cbn07IiwidmFyIFV0aWxzID0ge1xuICAgIGNvbnRhaW5zT2JqZWN0OiBmdW5jdGlvbihvYmosIGxpc3QpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobGlzdFtpXSA9PT0gb2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIHJhbmRvbU51bWJlcjogZnVuY3Rpb24obWluaW11bSwgbWF4aW11bSkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKG1heGltdW0gLSBtaW5pbXVtKSArIG1pbmltdW0pO1xuICAgIH0sXG5cbiAgICBnZXRTY3JlZW5XaWR0aCA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNjcmVlbi53aWR0aDtcbiAgICB9LFxuXG4gICAgZ2V0U2NyZWVuSGVpZ2h0IDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc2NyZWVuLmhlaWdodDtcbiAgICB9LFxuXG4gICAgYmFja2dyb3VuZHMgOiBbXG4gICAgXCJiYWNrZ3JvdW5kQmxhY2tcIixcbiAgICBcImJhY2tncm91bmRCbHVlXCIsXG4gICAgXCJiYWNrZ3JvdW5kRGFya1B1cnBsZVwiLFxuICAgIFwiYmFja2dyb3VuZFB1cnBsZVwiXG4gICAgXVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBVdGlsczsiXX0=
